{% extends "base.html" %}

{% block content %}
<h2>Tests</h2>

<p><a href="{{ url_for('new_test') }}">Neuen Test anlegen</a></p>

{% if tests %}
    <table>
        <thead>
            <tr>
                <th>ID</th>
                <th>Name</th>
                <th>Datum</th>
                <th>Notizen</th>
		<th>Aktionen</th>
            </tr>
        </thead>
        <tbody>
            {% for t in tests %}
                <tr>
                    <td>{{ t['id'] }}</td>
                    <td>{{ t['name'] }}</td>
                    <td>{{ t['date'] }}</td>
                    <td>{{ t['notes'] }}</td>
	            <td>
			<a href="{{ url_for('edit_test', test_id=t['id']) }}">Bearbeiten</a>
    			|
			<a href="{{ url_for('edit_test_questions', test_id=t['id']) }}">Fragen zuordnen</a>
    			|
			<a href="{{ url_for('test_preview', test_id=t['id']) }}">Vorschau / Drucken</a>
			|
			<form action="{{ url_for('duplicate_test', test_id=t['id']) }}"
      				method="post"
      				style="display:inline;">
    			  <a href="#" onclick="event.preventDefault(); this.closest('form').submit();">
        			Duplizieren
    			  </a>
			</form>
			|
			<form action="{{ url_for('delete_test', test_id=t['id']) }}"
      				method="post"
      				style="display:inline;">
    					<a href="#"
       					onclick="if (confirm('Diesen Test wirklich löschen?')) { this.closest('form').submit(); } return false;"
       					style="color:red;">
        					Löschen
    					</a>
			</form>
    		    </td>
                </tr>
            {% endfor %}
        </tbody>
    </table>
{% else %}
    <p>Noch keine Tests angelegt.</p>
{% endif %}

<p><a href="{{ url_for('index') }}">Zurück zur Themenübersicht</a></p>
{% endblock %}
